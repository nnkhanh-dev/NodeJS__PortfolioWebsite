<!-- Blog Detail Hero -->
<section class="relative min-h-[60vh] w-full overflow-hidden bg-gradient-to-br from-gray-900 via-purple-900 to-black flex items-center">
    <!-- Animated Background -->
    <div class="absolute inset-0" aria-hidden="true">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_30%_50%,rgba(139,92,246,0.1),transparent_50%)]"></div>
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_70%_50%,rgba(59,130,246,0.1),transparent_50%)]"></div>
    </div>

    <!-- Content -->
    <div class="container mx-auto px-4 py-20 relative z-10">
        <div class="max-w-4xl mx-auto text-center" data-aos="fade-up">
            <!-- Category Badge -->
            {{#if post.category}}
            <a href="/blog/category/{{post.category.slug}}" 
               class="inline-flex items-center gap-2 px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 border border-cyan-400/30 rounded-full text-cyan-400 text-sm font-medium transition-all mb-6">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path>
                </svg>
                {{post.category.name}}
            </a>
            {{/if}}

            <!-- Title -->
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">
                {{post.title}}
            </h1>

            <!-- Meta Info -->
            <div class="flex flex-wrap items-center justify-center gap-6 text-gray-300 text-sm sm:text-base">
                <!-- Author -->
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                    </svg>
                    <span>{{post.author.name}}</span>
                </div>

                <!-- Date -->
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                    </svg>
                    <span>{{formatDate post.createdAt}}</span>
                </div>

            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
        <svg class="w-6 h-6 text-white/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
    </div>
</section>

<!-- Blog Content -->
<section class="py-16 bg-gray-900">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">

             <!-- Author Bio -->
            <div class="mb-12 bg-gradient-to-r from-purple-900/20 to-blue-900/20 backdrop-blur-sm rounded-2xl p-4 sm:p-8 border border-purple-500/20" data-aos="fade-up" data-aos-delay="300">
                <div class="flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6">
                    <div class="flex-shrink-0">
                        {{#if user.avatar}}
                        <img src="{{user.avatar}}" alt="{{post.author.name}}" class="w-20 h-20 rounded-full object-cover ring-4 ring-purple-500/30">
                        {{else}}
                        <div class="w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center text-white text-2xl font-bold">
                            {{substring post.author.name 0 1}}
                        </div>
                        {{/if}}
                    </div>
                    <div class="flex-1 text-center sm:text-left">
                        <h3 class="text-lg sm:text-xl font-bold text-white mb-2">{{post.author.name}}</h3>
                        <p class="text-sm sm:text-base text-gray-400 mb-2 sm:mb-4">Tác giả của bài viết</p>
                        <p class="text-sm sm:text-base text-gray-300 break-words">{{post.author.email}}</p>
                    </div>
                </div>
            </div>

            <!-- Table of Contents -->
            <div id="table-of-contents" data-aos="fade-up" data-aos-delay="50">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Article Content -->
            <article class="prose prose-invert prose-lg max-w-none" data-aos="fade-up" data-aos-delay="100">
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 sm:p-12 border border-gray-700/50 shadow-xl">
                    <div class="blog-content">
                        {{{post.content}}}
                    </div>
                </div>
            </article>

            <!-- Tags (if you add tags later) -->
            <div class="mt-12 pt-8 border-t border-gray-700" data-aos="fade-up" data-aos-delay="200">
                <div class="flex flex-wrap items-center gap-4">
                    <span class="text-gray-400 font-medium">Chia sẻ:</span>
                    <!-- Social Share Buttons -->
                    <a href="#" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 hover:bg-blue-500 transition-colors">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>
                    <a href="#" class="flex items-center justify-center w-10 h-10 rounded-full bg-sky-500 hover:bg-sky-400 transition-colors">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                    </a>
                    <a href="#" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-700 hover:bg-blue-600 transition-colors">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                </div>
            </div>

           
        </div>
    </div>
</section>

<!-- Related Posts -->
{{#if relatedPosts}}
<section class="py-16 bg-gradient-to-b from-gray-900 to-gray-800">
    <div class="container mx-auto px-4">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl sm:text-4xl font-bold text-white mb-12 text-center" data-aos="fade-up">
                Bài viết <span class="bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">liên quan</span>
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {{#each relatedPosts}}
                <article class="group relative" data-aos="fade-up" data-aos-delay="{{multiply @index 100}}">
                    <div class="absolute -inset-0.5 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-2xl blur opacity-30 group-hover:opacity-100 transition duration-500"></div>
                    <div class="relative bg-gray-800 rounded-2xl overflow-hidden h-full flex flex-col">
                        <div class="relative aspect-video overflow-hidden">
                            {{#if thumbnail}}
                            <img src="{{thumbnail}}" 
                                 alt="{{title}}" 
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                            {{else}}
                            <div class="w-full h-full bg-gradient-to-br from-purple-600 to-blue-600"></div>
                            {{/if}}
                            <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <div class="flex items-center gap-2 text-gray-400 text-xs mb-3">
                                <svg class="w-4 h-4 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                                </svg>
                                <span>{{formatDate createdAt}}</span>
                                {{#if category}}
                                <span class="ml-2 px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded text-xs">{{category.name}}</span>
                                {{/if}}
                            </div>
                            <h3 class="text-lg font-bold text-white mb-3 group-hover:text-cyan-400 transition-colors line-clamp-2">
                                {{title}}
                            </h3>
                            <p class="text-gray-400 text-sm mb-4 flex-grow line-clamp-3">
                                {{excerpt}}
                            </p>
                            <a href="/blog/{{slug}}" class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300 font-medium transition-colors group/link text-sm">
                                Đọc thêm
                                <svg class="w-4 h-4 group-hover/link:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </article>
                {{/each}}
            </div>

            <!-- View All Button -->
            <div class="text-center mt-12" data-aos="fade-up" data-aos-delay="400">
                <a href="/#blog" class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-full text-white font-medium transition-all transform hover:scale-105 shadow-lg hover:shadow-cyan-500/50">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Quay lại trang chủ
                </a>
            </div>
        </div>
    </div>
</section>
{{/if}}

<style>
    /* Blog Content Styling */
    .blog-content {
        color: #e5e7eb;
        line-height: 1.8;
    }

    .blog-content h1,
    .blog-content h2,
    .blog-content h3,
    .blog-content h4,
    .blog-content h5,
    .blog-content h6 {
        color: #ffffff;
        font-weight: 700;
        margin-top: 2rem;
        margin-bottom: 1rem;
        line-height: 1.3;
    }

    .blog-content h1 { font-size: 2.25rem; }
    .blog-content h2 { font-size: 1.875rem; }
    .blog-content h3 { font-size: 1.5rem; }
    .blog-content h4 { font-size: 1.25rem; }

    .blog-content p {
        margin-bottom: 1.5rem;
    }

    .blog-content a {
        color: #22d3ee;
        text-decoration: underline;
        transition: color 0.3s;
    }

    .blog-content a:hover {
        color: #06b6d4;
    }

    .blog-content ul,
    .blog-content ol {
        margin-left: 2rem;
        margin-bottom: 1.5rem;
    }

    .blog-content li {
        margin-bottom: 0.5rem;
    }

    .blog-content blockquote {
        border-left: 4px solid #22d3ee;
        padding-left: 1.5rem;
        margin: 2rem 0;
        font-style: italic;
        color: #9ca3af;
    }

    .blog-content pre {
        background: #1f2937;
        border: 1px solid #374151;
        border-radius: 0.5rem;
        padding: 1.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
    }

    .blog-content code {
        background: #1f2937;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        color: #22d3ee;
    }

    .blog-content pre code {
        background: transparent;
        padding: 0;
        color: #e5e7eb;
    }

    .blog-content img {
        border-radius: 0.5rem;
        margin: 1rem auto;
        max-width: 100%;
        height: auto;
        display: block;
        object-fit: contain;
    }

    .blog-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 2rem 0;
    }

    .blog-content th,
    .blog-content td {
        border: 1px solid #374151;
        padding: 0.75rem;
        text-align: left;
    }

    .blog-content th {
        background: #1f2937;
        color: #ffffff;
        font-weight: 600;
    }

    .blog-content iframe {
        width: 100%;
        aspect-ratio: 16 / 9;
        border-radius: 1rem;
        margin: 2rem 0;
    }

    /* Scroll Margin for Headings (for smooth scroll with fixed header) */
    .blog-content h1,
    .blog-content h2,
    .blog-content h3,
    .blog-content h4 {
        scroll-margin-top: 120px;
    }
</style>

<!-- Table of Contents CSS -->
<link rel="stylesheet" href="/css/blog-toc.css">

<!-- Table of Contents Script -->
<script src="/js/blog-toc.js"></script>
